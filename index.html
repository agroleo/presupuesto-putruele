<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Presupuesto Fertilizantes - Agroconsulta SRL</title>

  <!-- Fuentes -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet" />

  <!-- html2pdf -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

  <style>
    /* === ESTILOS GENERALES === */
    body {
      font-family: "Roboto", sans-serif;
      background-color: #555; /* Fondo oscuro fuera de la hoja para resaltar */
      margin: 0;
      padding: 20px;
      color: #333;
    }

    .container {
      width: 750px; /* ANCHO FIJO: Simula una hoja A4 real en pantalla */
      min-width: 750px;
      margin: 0 auto;
      background-color: #ffffff;
      padding: 40px;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
      box-sizing: border-box; /* Importante para el padding */
    }

    /* === HEADER === */
    header {
      border-bottom: 3px solid #2e7d32;
      padding-bottom: 15px;
      margin-bottom: 30px;
      display: flex;
      justify-content: space-between;
      align-items: flex-end;
    }

    .logo h1 {
      margin: 0;
      color: #2e7d32;
      font-size: 24px;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .meta-info {
      text-align: right;
      font-size: 13px;
      color: #444;
      line-height: 1.4;
    }

    /* === ALERTAS Y TITULOS === */
    .alert-box {
      background-color: #fff8e1;
      border: 1px solid #ffecb3;
      color: #8d6e63;
      padding: 12px;
      border-radius: 4px;
      margin-bottom: 25px;
      font-weight: bold;
      text-align: center;
      font-size: 13px;
      text-transform: uppercase;
    }

    h3 {
      color: #1b5e20;
      border-bottom: 1px solid #ccc;
      padding-bottom: 5px;
      margin-top: 30px;
      margin-bottom: 10px;
      font-size: 16px;
      text-transform: uppercase;
    }

    p.desc {
      font-size: 12px;
      color: #666;
      margin-bottom: 15px;
      font-style: italic;
    }

    /* === TABLAS FIJAS (ESTILO ESTRICTO) === */
    table {
      width: 100%;
      table-layout: fixed; /* CLAVE: Las columnas respetan el ancho asignado */
      border-collapse: collapse;
      font-size: 12px;
      margin-bottom: 20px;
    }

    th {
      background-color: #2e7d32;
      color: white;
      padding: 8px 5px;
      text-transform: uppercase;
      font-size: 11px;
      letter-spacing: 0.5px;
      border: 1px solid #1b5e20;
    }

    td {
      padding: 8px 5px;
      border: 1px solid #ccc;
      text-align: center;
      vertical-align: middle;
      word-wrap: break-word; /* Si el texto es largo, baja de línea */
    }

    /* Estilos específicos de columnas */
    .col-prod { width: 30%; text-align: left; font-weight: bold; }
    .col-num  { width: 10%; }
    .col-money { width: 15%; background-color: #fcfcfc; }
    .col-total { width: 20%; background-color: #e8f5e9; font-weight: bold; }

    tr:nth-child(even) td { background-color: #f9f9f9; }

    /* === ZÓCALO NOTA IVA === */
    .tax-note {
      margin-top: 30px;
      padding: 10px;
      border: 2px dashed #ccc;
      background-color: #fafafa;
      font-size: 12px;
      color: #555;
      text-align: center;
    }

    /* === FOOTER === */
    .footer-vos {
      margin-top: 40px;
      background-color: #222;
      color: #fff;
      padding: 15px;
      text-align: center;
      border-radius: 4px;
    }
    .footer-vos h4 { margin: 0 0 5px 0; color: #81c784; font-size: 14px; }
    .footer-vos p { font-size: 11px; color: #ccc; margin: 0; }

    /* === BOTÓN PDF === */
    .pdf-btn {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background-color: #d32f2f;
      color: white;
      border: none;
      padding: 15px 25px;
      border-radius: 50px;
      font-weight: bold;
      box-shadow: 0 4px 10px rgba(0,0,0,0.3);
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      font-family: inherit;
      z-index: 999;
    }
    .pdf-btn:hover { background-color: #b71c1c; transform: translateY(-2px); }

    /* Salto de página forzado para PDF */
    .page-break {
      display: block;
      height: 1px;
      page-break-before: always;
      margin: 20px 0;
    }
  </style>
</head>
<body>

  <button class="pdf-btn" id="downloadBtn">
    <svg style="width:20px;height:20px" viewBox="0 0 24 24"><path fill="currentColor" d="M19,19H5V5H19M19,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5A2,2 0 0,0 19,3M13.96,12.29L11.21,15.83L9.25,13.47L6.5,17H17.5L13.96,12.29Z" /></svg>
    DESCARGAR PDF
  </button>

  <div class="container" id="printableArea">
    
    <header>
      <div class="logo">
        <h1>Agroconsulta SRL</h1>
        <div style="font-size: 12px; color: #666;">San Juan, Argentina</div>
      </div>
      <div class="meta-info">
        <strong>FECHA:</strong> 21/01/2026<br>
        <strong>REF:</strong> Plan Fertilización (Uva)<br>
        <strong>SUP:</strong> 37 ha
      </div>
    </header>

    <div class="alert-box">
      ⚠ REQUISITO: Aplicación incorporada al suelo obligatoria.
    </div>

    <!-- PAQUETE 1 -->
    <h3>1. PAQUETE TECNOLÓGICO SIMPLE (120 u N/ha)</h3>
    <p class="desc">Fuentes convencionales de nitrógeno.</p>

    <table>
      <!-- Definición estricta de anchos de columna -->
      <colgroup>
        <col class="col-prod">
        <col class="col-num">
        <col class="col-num">
        <col class="col-num">
        <col class="col-money">
        <col class="col-money">
        <col class="col-total">
      </colgroup>
      <thead>
        <tr>
          <th>Producto</th>
          <th>u N/ha</th>
          <th>Bol/ha</th>
          <th>Total Bol</th>
          <th>$/Unit (Neto)</th>
          <th>$/ha (Neto)</th>
          <th>TOTAL (Neto)</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Urea 45% N</td>
          <td>120</td>
          <td>11</td>
          <td>407</td>
          <td>$24.140</td>
          <td>$265.540</td>
          <td>$9.824.980</td>
        </tr>
        <tr>
          <td>Nitrato Amonio 28%</td>
          <td>120</td>
          <td>18</td>
          <td>666</td>
          <td>$23.526</td>
          <td>$423.468</td>
          <td>$15.668.316</td>
        </tr>
      </tbody>
    </table>

    <!-- PAQUETE 2 -->
    <h3>2. PAQUETE TECNOLÓGICO ELEVADO (80 u N/ha)</h3>
    <p class="desc">Alta eficiencia con inhibidores o complejos.</p>

    <table>
      <colgroup>
        <col class="col-prod">
        <col class="col-num">
        <col class="col-num">
        <col class="col-num">
        <col class="col-money">
        <col class="col-money">
        <col class="col-total">
      </colgroup>
      <thead>
        <tr>
          <th>Producto</th>
          <th>u N/ha</th>
          <th>Bol/ha</th>
          <th>Total Bol</th>
          <th>$/Unit (Neto)</th>
          <th>$/ha (Neto)</th>
          <th>TOTAL (Neto)</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>YaraBela Nitrodoble<br><span style="font-size:10px; color:#666">(27%N + Ca + Mg)</span></td>
          <td>80</td>
          <td>12</td>
          <td>444</td>
          <td>$25.194</td>
          <td>$302.328</td>
          <td>$11.186.136</td>
        </tr>
        <tr>
          <td>Nitrogen Slow X<br><span style="font-size:10px; color:#666">(45%N + DMPP)</span></td>
          <td>80</td>
          <td>8</td>
          <td>296</td>
          <td>$42.838</td>
          <td>$342.704</td>
          <td>$12.680.048</td>
        </tr>
      </tbody>
    </table>

    <div class="page-break"></div> <!-- Corte de hoja forzado -->

    <!-- RESUMEN -->
    <h3>RESUMEN COMPARATIVO DE INVERSIÓN</h3>
    
    <table>
      <colgroup>
        <col style="width: 40%; text-align: left;">
        <col style="width: 20%;">
        <col style="width: 20%; background-color: #fcfcfc;">
        <col style="width: 20%; background-color: #e8f5e9; font-weight: bold;">
      </colgroup>
      <thead>
        <tr>
          <th>Opción</th>
          <th>Tecnología</th>
          <th>Costo/ha (Neto)</th>
          <th>Inversión 37ha (Neto)</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align:left"><strong>1A (Urea)</strong></td>
          <td>Simple</td>
          <td>$265.540</td>
          <td>$9.824.980</td>
        </tr>
        <tr>
          <td style="text-align:left"><strong>2A (YaraBela)</strong></td>
          <td>Elevada</td>
          <td>$302.328</td>
          <td>$11.186.136</td>
        </tr>
        <tr>
          <td style="text-align:left"><strong>2B (Slow X)</strong></td>
          <td>Elevada</td>
          <td>$342.704</td>
          <td>$12.680.048</td>
        </tr>
        <tr>
          <td style="text-align:left"><strong>1B (Nitrato)</strong></td>
          <td>Simple</td>
          <td>$423.468</td>
          <td>$15.668.316</td>
        </tr>
      </tbody>
    </table>

    <div class="tax-note">
      <strong>IMPORTANTE - CONDICIÓN IMPOSITIVA:</strong><br>
      Los valores expresados son <strong>NETOS</strong>. No incluyen <strong>IVA (10.5%)</strong>.<br>
      El impuesto se calculará sobre el total al momento de la facturación.
    </div>

    <div class="footer-vos">
      <h4>COMUNIDAD +VOS | Sinergia Agro</h4>
      <p>Sostenibilidad • Gestión Digital • Comunidad</p>
    </div>

  </div>

  <script>
    document.getElementById('downloadBtn').addEventListener('click', function() {
      const element = document.getElementById('printableArea');
      const btn = this;
      
      btn.innerHTML = "PROCESANDO...";
      btn.disabled = true;

      // Configuración A4 exacta
      const opt = {
        margin:       [10, 10, 10, 10], // mm
        filename:     'Presupuesto_Agroconsulta_Final.pdf',
        image:        { type: 'jpeg', quality: 1 }, // Máxima calidad
        html2canvas:  { 
          scale: 2, 
          useCORS: true,
          scrollY: 0
        },
        jsPDF:        { unit: 'mm', format: 'a4', orientation: 'portrait' },
        pagebreak:    { mode: ['css', 'legacy'] }
      };

      html2pdf().set(opt).from(element).save().then(() => {
        btn.innerHTML = `<svg style="width:20px;height:20px" viewBox="0 0 24 24"><path fill="currentColor" d="M19,19H5V5H19M19,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5A2,2 0 0,0 19,3M13.96,12.29L11.21,15.83L9.25,13.47L6.5,17H17.5L13.96,12.29Z" /></svg> DESCARGAR PDF`;
        btn.disabled = false;
      });
    });
  </script>

</body>
</html>
